steps:
- name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
  args:
  - gcloud
  - functions
  - deploy
  # デプロイするfunction名
  - share_tech_blog_article_to_x
  - --region=asia-northeast1
  # 関数のソースコードの場所
  - --source=.
  # ソースコード内に存在する関数名または完全修飾クラス名
  - --entry-point=share

- name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
  args:
  - gcloud
  - functions
  - deploy
  # デプロイするfunction名
  - collect_tech_blog_article_from_cms
  - --region=asia-northeast1
  # 関数のソースコードの場所
  - --source=.
  # ソースコード内に存在する関数名または完全修飾クラス名
  - --entry-point=collect

- name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
  args:
  - gcloud
  - pubsub
  - topics
  - publish
  - function-deploy-topic
  - --message
  - "Finish deploying tech blog share function !!"
